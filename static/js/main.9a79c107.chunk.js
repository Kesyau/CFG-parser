(this["webpackJsonpcfg-parser"]=this["webpackJsonpcfg-parser"]||[]).push([[0],{119:function(e,t,a){e.exports=a(131)},131:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(45),o=a.n(r),c=a(65),i=a(94),s=a(89),u=a(146),m=a(151),d=a(153),p=a(63),h=a(144),f=a(145),E=a(154),g=a(149),v=a(12),b=a(19),y=a(148),C=a(132);function N(e){return l.a.createElement(C.a,Object.assign({type:"button",basic:!0},e))}var O=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).loadFile=function(){n.props.onItemsChange([]);var e=new FileReader;e.onload=function(){var t,a=Object(b.a)(e.result.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/));try{for(a.s();!(t=a.n()).done;){var l=t.value;""!==l.split(";")[0]&&n.props.onItemsChange([].concat(Object(v.a)(n.props.items),[l.split(";")[0]]))}}catch(r){a.e(r)}finally{a.f()}},e.readAsText(n.refFileInput.current.files[0])},n.loadGBKFile=function(){n.props.onItemsChange([]);var e=new FileReader;e.onload=function(){var t,a=e.result,l=new TextDecoder("gbk").decode(a),r=Object(b.a)(l.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/));try{for(r.s();!(t=r.n()).done;){var o=t.value;""!==o.split(";")[0]&&n.props.onItemsChange([].concat(Object(v.a)(n.props.items),[o.split(";")[0]]))}}catch(c){r.e(c)}finally{r.f()}},e.readAsArrayBuffer(n.refFileInput.current.files[0])},n.addNewOne=function(){""===n.state.newOne||n.props.items.includes(n.state.newOne)||(n.props.onItemsChange([].concat(Object(v.a)(n.props.items),[n.state.newOne])),n.setState({newOne:""}))},n.render=function(){return l.a.createElement(y.a,{compact:"very"},l.a.createElement(y.a.Header,null,l.a.createElement(y.a.Row,null,l.a.createElement(y.a.HeaderCell,null,l.a.createElement("input",{ref:n.refFileInput,type:"file",accept:"text/plain",style:{display:"none"},onChange:function(e){return n.setState({fileName:e.target.files[0].name})}}),l.a.createElement(h.a,{fluid:!0,readOnly:!0,placeholder:n.props.kind[0].toUpperCase()+n.props.kind.slice(1)+" file",value:n.state.fileName,onClick:function(){return n.refFileInput.current.click()}})),l.a.createElement(y.a.HeaderCell,null,l.a.createElement(N,{positive:!0,fluid:!0,onClick:n.loadFile,disabled:""===n.state.fileName},"Load "+n.props.kind+" file")),l.a.createElement(y.a.HeaderCell,{collapsing:!0},l.a.createElement(N,{positive:!0,fluid:!0,onClick:n.loadGBKFile,disabled:""===n.state.fileName},"Load GBK "+n.props.kind+" file")))),l.a.createElement(y.a.Body,null,n.props.items.map((function(e,t){return l.a.createElement(y.a.Row,{key:t},l.a.createElement(y.a.Cell,null,l.a.createElement(h.a,{fluid:!0,value:e,onChange:function(e){return n.props.onItemsChange([].concat(Object(v.a)(n.props.items.slice(0,t)),[e.target.value],Object(v.a)(n.props.items.slice(t+1))))}})),l.a.createElement(y.a.Cell,null,l.a.createElement(C.a.Group,null,l.a.createElement(N,{icon:"angle double up",onClick:function(){return n.props.onItemsChange([n.props.items[t]].concat(Object(v.a)(n.props.items.slice(0,t)),Object(v.a)(n.props.items.slice(t+1))))},disabled:0===t}),l.a.createElement(N,{icon:"angle up",onClick:function(){return n.props.onItemsChange([].concat(Object(v.a)(n.props.items.slice(0,t-1)),[n.props.items[t],n.props.items[t-1]],Object(v.a)(n.props.items.slice(t+1))))},disabled:0===t}),l.a.createElement(N,{icon:"angle down",onClick:function(){return n.props.onItemsChange([].concat(Object(v.a)(n.props.items.slice(0,t)),[n.props.items[t+1],n.props.items[t]],Object(v.a)(n.props.items.slice(t+2))))},disabled:t===n.props.items.length-1}),l.a.createElement(N,{icon:"angle double down",onClick:function(){return n.props.onItemsChange([].concat(Object(v.a)(n.props.items.slice(0,t)),Object(v.a)(n.props.items.slice(t+1)),[n.props.items[t]]))},disabled:t===n.props.items.length-1}))),l.a.createElement(y.a.Cell,null,l.a.createElement(N,{negative:!0,fluid:!0,onClick:function(){return n.props.onItemsChange([].concat(Object(v.a)(n.props.items.slice(0,t)),Object(v.a)(n.props.items.slice(t+1))))}},"Remove")))}))),l.a.createElement(y.a.Footer,null,l.a.createElement(y.a.Row,null,l.a.createElement(y.a.HeaderCell,null,l.a.createElement(h.a,{fluid:!0,placeholder:"New "+n.props.kind,value:n.state.newOne,onChange:function(e){return n.setState({newOne:e.target.value})}})),l.a.createElement(y.a.HeaderCell,{collapsing:!0},l.a.createElement(N,{positive:!0,fluid:!0,onClick:n.addNewOne,disabled:""===n.state.newOne},"Add new "+n.props.kind)),l.a.createElement(y.a.HeaderCell,null,l.a.createElement(N,{negative:!0,fluid:!0,onClick:function(){return n.props.onItemsChange([])},disabled:0===n.props.items.length},"Remove all")))))},n.state={fileName:"",newOne:""},n.refFileInput=l.a.createRef(),n}return a}(n.Component),w=a(147),j=a(150);function S(e){var t=e.rootNode,a=e.quot;!function e(t,a){if(t.depth=a,null!==t.yNode){if(null===t.zNode)return t.children=[t.yNode],t.yNode.isFirstChild=!0,t.yNode.isLastChild=!0,void e(t.yNode,a+1);if("_"===t.xStr[0])return e(t.yNode,a),void e(t.zNode,a);var n=t.yNode;for(t.children=[t.zNode],t.zNode.isFirstChild=!1,t.zNode.isLastChild=!0;"_"===n.xStr[0];)t.children=[n.zNode].concat(Object(v.a)(t.children)),n.zNode.isFirstChild=!1,n.zNode.isLastChild=!1,n=n.yNode;t.from=n.from,t.children=[n].concat(Object(v.a)(t.children)),n.isFirstChild=!0,n.isLastChild=!1,e(t.yNode,a+1),e(t.zNode,a+1)}else t.children=[]}(t,0);for(var n=[t],r=[],o=[],c=0;c<n.length;){void 0===r[n[c].depth]&&(r[n[c].depth]=l.a.createElement(l.a.Fragment,null),o[n[c].depth]=0),"_"!==n[c].xStr[0]&&(o[n[c].depth]<n[c].from&&(r[n[c].depth]=l.a.createElement(l.a.Fragment,null,r[n[c].depth],l.a.createElement("td",{colSpan:n[c].from-o[n[c].depth]}))),r[n[c].depth]=l.a.createElement(l.a.Fragment,null,r[n[c].depth],l.a.createElement("td",{key:c,colSpan:n[c].to-n[c].from,style:{textAlign:"center",verticalAlign:"top",padding:"0"}},0===n[c].depth?l.a.createElement(l.a.Fragment,null):l.a.createElement("table",{style:{width:"100%",height:"1em",borderSpacing:"0"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{style:{width:"50%",borderTop:n[c].isFirstChild?"none":"1px solid",borderRight:"1px solid"}}),l.a.createElement("td",{style:{width:"50%",borderTop:n[c].isLastChild?"none":"1px solid"}})))),l.a.createElement("div",null,"\u2003",0===n[c].children.length&&a.length>0?n[c].xStr.slice(a.length,-a.length):n[c].xStr,"\u2003"),0===n[c].children.length?l.a.createElement(l.a.Fragment,null):l.a.createElement("table",{style:{width:"100%",height:"1em",borderSpacing:"0"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{style:{width:"50%",borderRight:"1px solid"}}),l.a.createElement("td",{style:{width:"50%"}})))))),o[n[c].depth]=n[c].to);var i,s=Object(b.a)(n[c].children);try{for(s.s();!(i=s.n()).done;){var u=i.value;n.push(u)}}catch(m){s.e(m)}finally{s.f()}c++}return l.a.createElement("table",{style:{margin:"auto",borderSpacing:"0"}},l.a.createElement("tbody",null,r.map((function(e,t){return l.a.createElement("tr",{key:t},e)}))))}function k(e){var t,a=[],r=Object(b.a)(e.rules);try{for(r.s();!(t=r.n()).done;){var o,c=t.value.split(" -> "),i=c[0],s=Object(b.a)(c[1].split(" | "));try{for(s.s();!(o=s.n()).done;){var d=o.value;a.push([i,d])}}catch(C){s.e(C)}finally{s.f()}}}catch(C){r.e(C)}finally{r.f()}var p=[];a.forEach((function(e,t){var a=e[1].split(" ");if(1===a.length)p.push([e[0],a[0],""]);else{var n=a[0];a.slice(1,-1).forEach((function(e,a){var l="_".concat(t,"_").concat(a);p.push([l,n,e]),n=l})),p.push([e[0],n,a[a.length-1]])}}));var h=function(e){for(var t=[e],a=0;a<t.length;){var n,l=Object(b.a)(p);try{for(l.s();!(n=l.n()).done;){var r=n.value;r[1]===t[a].xStr&&""===r[2]&&t.push({xStr:r[0],yNode:t[a],zNode:null,from:e.from,to:e.to})}}catch(C){l.e(C)}finally{l.f()}a++}return t},f=function t(a){return null===a.yNode?l.a.createElement(l.a.Fragment,null,0===e.quot.length?a.xStr:a.xStr.slice(e.quot.length,-e.quot.length)):null===a.zNode?l.a.createElement(l.a.Fragment,null,"[",l.a.createElement("sub",null,l.a.createElement("em",null,a.xStr))," ",t(a.yNode),"]"):"_"===a.xStr[0]?l.a.createElement(l.a.Fragment,null,t(a.yNode)," ",t(a.zNode)):l.a.createElement(l.a.Fragment,null,"[",l.a.createElement("sub",null,l.a.createElement("em",null,a.xStr))," ",t(a.yNode)," ",t(a.zNode),"]")},E=[],g=[];return e.samples.forEach((function(t,a){for(var n=t.split(" "),r=[],o=1;o<=n.length;o++){r[o-1]=[],r[o-1][o]=h({xStr:e.quot+n[o-1]+e.quot,yNode:null,zNode:null,from:o-1,to:o});for(var c=o-2;c>=0;c--){r[c][o]=[];for(var i=c+1;i<o;i++){var s,u=Object(b.a)(p);try{var m=function(){var e,t=s.value,a=Object(b.a)(r[c][i].filter((function(e){return e.xStr===t[1]})));try{for(a.s();!(e=a.n()).done;){var n,l=e.value,u=Object(b.a)(r[i][o].filter((function(e){return e.xStr===t[2]})));try{for(u.s();!(n=u.n()).done;){var m,d=n.value;(m=r[c][o]).push.apply(m,Object(v.a)(h({xStr:t[0],yNode:l,zNode:d,from:c,to:o})))}}catch(C){u.e(C)}finally{u.f()}}}catch(C){a.e(C)}finally{a.f()}};for(u.s();!(s=u.n()).done;)m()}catch(C){u.e(C)}finally{u.f()}}}}E[a]=[],g[a]=[];var d,y=Object(b.a)(r[0][n.length].filter((function(t){return t.xStr===e.root})));try{for(y.s();!(d=y.n()).done;){var N=d.value;E[a].push(f(N)),g[a].push(l.a.createElement(S,{rootNode:N,quot:e.quot}))}}catch(C){y.e(C)}finally{y.f()}})),l.a.createElement(u.a.Pane,null,l.a.createElement(y.a,{compact:"very"},l.a.createElement(y.a.Body,null,e.samples.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement(y.a.Row,{positive:E[t].length>0,negative:0===E[t].length},l.a.createElement(y.a.Cell,null,e),l.a.createElement(y.a.Cell,null,0===E[t].length?"No":E[t].length," result",1===E[t].length?"":"s")),E[t].map((function(e,a){return l.a.createElement(y.a.Row,{key:a},l.a.createElement(y.a.Cell,null,e),l.a.createElement(y.a.Cell,{collapsing:!0},l.a.createElement(w.a,{basic:!0,size:"fullscreen",trigger:l.a.createElement(N,null,"Show tree"),content:g[t][a],actions:["Close"]})))})))})))),a.length>0?l.a.createElement(j.a,{styled:!0,fluid:!0,defaultActiveIndex:-1,panels:[{key:"simpleRules",title:"Rules without vertical lines",content:{content:l.a.createElement(m.a,null,l.a.createElement("pre",null,a.map((function(e){return"".concat(e[0]," -> ").concat(e[1])})).join("\n")))}}]}):l.a.createElement(l.a.Fragment,null))}var I=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleRulesChange=function(e){return n.setState({rules:e})},n.handleSamplesChange=function(e){return n.setState({samples:e})},n.handleQuotChange=function(e,t){var a=t.value;return n.setState({quot:a})},n.rulePaneRender=function(){return l.a.createElement(u.a.Pane,null,l.a.createElement(m.a,null,l.a.createElement(m.a.List,null,l.a.createElement(m.a.Item,null,"Non-terminal symbols are:\u2003",l.a.createElement(d.a,{label:l.a.createElement("label",null,"bare, e.g. ",l.a.createElement(p.a,null,"DP -> the NP"),"."),name:"quotRadioGroup",value:"",checked:""===n.state.quot,onChange:n.handleQuotChange}),"\u2003",l.a.createElement(d.a,{label:l.a.createElement("label",null,'wrapped in ASCII quotation marks ("), e.g. ',l.a.createElement(p.a,null,'DP -> "the" NP'),"."),name:"quotRadioGroup",value:'"',checked:'"'===n.state.quot,onChange:n.handleQuotChange})),l.a.createElement(m.a.Item,null,"Rules with the same left-hand side can be joined with vertical lines (|), e.g. ",l.a.createElement(p.a,null,"NP -> N | AdjP N | N PP | AdjP N PP"),"."))),l.a.createElement(O,{key:"rule",kind:"rule",items:n.state.rules,onItemsChange:n.handleRulesChange}))},n.samplePaneRender=function(){return l.a.createElement(u.a.Pane,null,l.a.createElement(m.a,null,l.a.createElement(m.a.List,null,l.a.createElement(m.a.Item,null,"Terminal symbols should be space-separated."))),l.a.createElement(O,{key:"sample",kind:"sample",items:n.state.samples,onItemsChange:n.handleSamplesChange}))},n.rootPaneRender=function(){return l.a.createElement(u.a.Pane,null,l.a.createElement(h.a,{labelPosition:"left",value:n.state.root,onChange:function(e){return n.setState({root:e.target.value})}},l.a.createElement(p.a,null,"Start symbol"),l.a.createElement("input",null)))},n.resultPaneRender=function(){return l.a.createElement(k,{rules:n.state.rules,samples:n.state.samples,root:n.state.root,quot:n.state.quot})},n.render=function(){return l.a.createElement(f.a,null,l.a.createElement("br",null),l.a.createElement(E.a,{as:"h1"},"CFG parser"),l.a.createElement(u.a,{panes:[{menuItem:"Set rules",render:n.rulePaneRender},{menuItem:"Set samples",render:n.samplePaneRender},{menuItem:"Set start symbol",render:n.rootPaneRender},{menuItem:"Parse",render:n.resultPaneRender}]}),l.a.createElement(f.a,{textAlign:"center"},l.a.createElement("br",null),l.a.createElement(g.a,{link:!0,horizontal:!0},l.a.createElement(g.a.Item,null,"Version 201025"))))},n.state={rules:[],samples:[],root:"S",quot:""},n}return a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(130);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[119,1,2]]]);
//# sourceMappingURL=main.9a79c107.chunk.js.map